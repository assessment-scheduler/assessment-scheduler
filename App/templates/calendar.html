{% extends "layout.html" %}

{% block title %}Calendar{% endblock %}

{% block head %}
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
<link rel="stylesheet" href="../static/css/style.css">
{% endblock %}

{% block content %}
<div id="container">
  <div id="filters">
    <select id="level">
      <option value="0" class="list-item">Level</option>
      <option value="1" class="list-item">1</option>
      <option value="2" class="list-item">2</option>
      <option value="3" class="list-item">3</option>
    </select>

    <select id="courses">
      <option value="My Courses">My Courses</option>
      <option value="all">ALL</option>
      {% for course in staff_courses %}
      <option value="{{course.code}}">{{course.code}} - {{course.name}}</option>
      {% endfor %}
    </select>

    <select id="assignmentType">
      <option value="all">All Types</option>
      <option value="0">Assignments</option>
      <option value="1">Proctored Exams</option>
    </select>
  </div>
  <div id="main">

    <div id="calendar"></div>
    <div id="nav">
      <div id="courses-list"></div>
      <div id="remove-event"></div>
    </div>
  </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
<script>
  // Pass model data to JavaScript
  var exams = {{ staff_exams | tojson }};
  var myCourses = {{ staff_courses | tojson }};
  var semester = {{ semester | tojson }};
  var otherExams = {{ other_exams | tojson }};
  
  // Add semester week data for calculations
  var semesterStartDate = new Date(semester.start_date);
  var semesterEndDate = new Date(semester.end_date);
  var semesterWeeks = Math.ceil((semesterEndDate - semesterStartDate) / (7 * 24 * 60 * 60 * 1000));
  
  // Function to convert week/day to actual dates
  function getDateFromWeekDay(startDate, week, day) {
    const result = new Date(startDate);
    result.setDate(result.getDate() + (week - 1) * 7 + day - 1);
    return result;
  }
</script>
<script src="{{url_for('static', filename='index.js')}}"></script>
<script src="{{url_for('static', filename='js/mobileMenu.js')}}"></script>

{% endblock %}